<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
  <head>
	   <meta http-equiv="content-type" content="text/html; charset=utf-8">
     <script type="text/javascript">
      function handleEvent (event) {
      	var message = event.data ;
      	switch (message.type) {
      	  case "script":
      	    handleScriptMessage(message);
      	    break;
          case "img":
      	    handleImageMessage(message);
      	    break;
      	  default:

      	}
      }

      function handleScriptMessage(message) {
         var scriptElement = document.createElement('script');
         scriptElement.type  = "text/javascript";
         scriptElement.textContent = message.textContent;

         var bodyElement = document.getElementsByTagName('body')[0];
         bodyElement.appendChild(scriptElement);
      }

      function handleImageMessage(message) {
         var imageElement = document.createElement('img');
         imageElement.src = message.src;
         imageElement.width = 100;
         imageElement.height = 100;

         var bodyElement = document.getElementsByTagName('body')[0];
         bodyElement.appendChild(imageElement);
      }

      if (window.addEventListener) {
      	window.addEventListener("message", handleEvent, false);
      } else {
        // Internet Explorer versions prior to IE 9
      	window.attachEvent("onmessage", handleEvent);
      }
    </script>
  </head>
  <body>
  </body>
</html>
